server:
  # HTTP listen address.
  listen: "0.0.0.0:8080"
  # Alertmanager webhook path.
  path: "/alert"
  read_timeout: 5s
  write_timeout: 10s
  idle_timeout: 60s
  max_body_bytes: 4194304

auth:
  # Optional shared token authentication.
  # Supported headers:
  # - Authorization: Bearer <token>
  # - X-Token: <token>
  token: ""

template:
  # Template directory for loading "*.tmpl".
  # Leave empty to use the embedded default template.
  #
  # Example (Docker):
  #   dir: "/data/templates"
  #
  # If the directory does not exist (e.g. not mounted in Docker), the app will
  # fall back to the embedded default template.
  dir: ""

admin:
  enabled: false
  path_prefix: "/admin"
  basic_auth:
    username: "admin"
    password: "change-me"

reload:
  # Safe hot reload (atomic switch + rollback on failure).
  enabled: false
  interval: 2s

dingtalk:
  timeout: 5s
  robots:
    - name: "default"
      webhook: "https://oapi.dingtalk.com/robot/send?access_token=YOUR_ACCESS_TOKEN"
      # Secret for "sign" (optional).
      secret: ""
      # markdown / text
      msg_type: "markdown"
      # DingTalk markdown.title
      # - Leave empty to use Alertmanager "summary".
      title: ""

  # channels + routes:
  # - channels: sending target (robots + template + mention rules)
  # - routes:   match receiver/status/labels and select channels
  channels:
    - name: "default" # required
      robots: ["default"]
      template: "default"
      mention:
        at_all: false
        at_mobiles: []
        at_user_ids: []
      mention_rules:
        - name: "critical->@all"
          when:
            labels:
              severity: ["critical"]
          mention:
            at_all: true

  # routes can be empty (then everything goes to the "default" channel).
  routes:
    - name: "by-receiver"
      when:
        receiver: ["ops-team"]
      channels: ["default"]

