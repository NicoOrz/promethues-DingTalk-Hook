server:
  listen: "0.0.0.0:8080"
  path: "/alert"
  read_timeout: 5s
  write_timeout: 10s
  idle_timeout: 60s
  max_body_bytes: 4194304

auth:
  # 内网可留空；启用后支持：
  # - Authorization: Bearer <token>
  # - X-Token: <token>
  token: ""

template:
  # 三选一：
  # - dir: 模板目录（多模板，推荐用于 Admin UI）
  # - file: 单模板文件
  # - 留空：使用内置 default 模板
  dir: ""
  file: ""
  default: "default"

admin:
  enabled: false
  path_prefix: "/admin"
  basic_auth:
    username: "admin"
    password: "change-me"

reload:
  enabled: false
  interval: 2s

dingtalk:
  timeout: 5s
  robots:
    - name: "default"
      webhook: "https://oapi.dingtalk.com/robot/send?access_token=YOUR_ACCESS_TOKEN"
      # 如果机器人启用了“加签”，填写 secret
      secret: ""
      # markdown / text
      msg_type: "markdown"
      # 钉钉消息标题（markdown 消息的 title 字段）
      title: "Alertmanager"

  # channels + routes：
  # - channels: 发送目标（绑定机器人、模板、@ 规则）
  # - routes:   按 receiver/status/labels 匹配，决定使用哪些 channels
  channels:
    - name: "default" # 必须存在
      robots: ["default"]
      template: "default"
      mention:
        at_all: false
        at_mobiles: []
        at_user_ids: []
      mention_rules:
        - name: "critical->@all"
          when:
            labels:
              severity: ["critical"]
          mention:
            at_all: true

  # routes 允许为空（此时所有告警都走 default channel）
  routes:
    - name: "by-receiver"
      when:
        receiver: ["ops-team"]
      channels: ["default"]
